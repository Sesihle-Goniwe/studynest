<!-- Add Courses Section -->
<div class="add-course">
  <h3>Add a Course</h3>
  <form (ngSubmit)="addCourse()">
    <label>Course Code:</label>
    <input type="text" [(ngModel)]="newCourse.course_code" name="course_code" required />

    <label>Course Name:</label>
    <input type="text" [(ngModel)]="newCourse.course_name" name="course_name" required />

    <button type="submit">➕ Add Course</button>
  </form>


  <ul>
    <li *ngFor="let course of courses">{{ course.course_code }} - {{ course.course_name }}</li>
  </ul>

  <button (click)="findMatches()">
    🔍 Find Matches
  </button>
</div>

<!-- Matching Students Section -->
@if (showMatches) {
  @if (matches.length > 0 && currentIndex < matches.length) {
    <div class="card">
      <div class="profile-image-container" (click)="showFullScreenImage(matches[currentIndex].students.profileImage)">
        @if (matches[currentIndex].students.profileImage) {
          <img [src]="matches[currentIndex].students.profileImage" alt="Profile Picture" class="profile-picture">
        } @else {
          <div class="no-image-placeholder">No Image</div>
        }
      </div>

      <h3>{{ matches[currentIndex].students.full_name }}</h3>
      <p>University: {{ matches[currentIndex].students.university }}</p>
      <p>Year: {{ matches[currentIndex].students.year }}</p>

      <h4>Courses:</h4>
      <ul>
        @for (course of matches[currentIndex].courses; track course.course_code) {
          <li>{{ course.course_code }}</li>
        }
      </ul>

      <button (click)="likeStudent(matches[currentIndex])" class="like-btn">✅ Match</button>
      <button (click)="skipStudent(matches[currentIndex])" class="skip-btn">❌ Skip</button>
    </div>
  } @else {
    <p>No more matches found 🎉</p>
  }

  @if (isFullScreenImageVisible) {
    <div class="full-screen-modal" (click)="hideFullScreenImage()">
      <img [src]="fullScreenImageUrl" alt="Full screen profile picture" class="full-screen-image">
    </div>
  }
}

<button (click)="loadMatchedPartners()">👥 See My Partners</button>

@if (likedPartners.length > 0) {
  <h2>My Liked Partners</h2>
  <div class="matched-partners-container">
    @for (partner of likedPartners; track partner.id) {
      <div class="partner-card">
        <div class="partner-info">
          <h3 class="partner-id">{{ partner.students?.full_name }}</h3>
          <p class="partner-detail">University: {{ partner.students?.university }}</p>
          <p class="partner-detail">Year: {{ partner.students?.year }}</p>
        </div>
        <div class="status-badge status-{{ partner.status }}">
          {{ partner.status }}
        </div>
        <button class="view-profile-btn" (click)="viewProfile(partner.students.user_id)">
        View Profile
        </button>
      </div>
    }
  </div>
} @else {
  <p>You haven't liked any partners yet.</p>
}

<hr>

@if (rejectedPartners.length > 0) {
  <h2>My Rejected Partners</h2>
  <div class="rejected-partners-container">
    @for (partner of rejectedPartners; track partner.id) {
      <div class="partner-card rejected-card">
        <div class="partner-info">
          <h3 class="partner-id">{{ partner.students?.full_name }}</h3>
          <p class="partner-detail">University: {{ partner.students?.university }}</p>
          <p class="partner-detail">Year: {{ partner.students?.year }}</p>
        </div>
        <div class="status-badge status-{{ partner.status }}">
          {{ partner.status }}
        </div>
        <button class="view-profile-btn" (click)="viewProfile(partner.students.user_id)">
        View Profile
        </button>
      </div>
    }
  </div>
} @else {
  <p>You haven't rejected any partners yet.</p>
}


